<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="6d527cfc-7bb4-4502-9e8e-a7fc731a7f46" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="DuplicateCreateCCStoredPM" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="6d527cfc-7bb4-4502-9e8e-a7fc731a7f46fileName">DuplicateCreateCCStoredPM</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="datagen" name="DataGenRadmonCANforDuplicate" id="373e3f83-87e5-4d28-93c1-fcf2e2140431">
    <con:settings/>
    <con:config xsi:type="con:DataGeneratorStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:property type="Number">
        <con:configuration>
          <start>100000000</start>
          <end>999999999</end>
          <step/>
          <pattern/>
          <random>true</random>
          <persist>false</persist>
        </con:configuration>
        <con:name>DuplicateCAN</con:name>
        <con:mode>STEP</con:mode>
        <con:shared>true</con:shared>
      </con:property>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="FirstCreate" id="2dd22ea3-bafa-442e-bcdb-6e8f1d86f646">
    <con:settings/>
    <con:config service="REST Service 14" resourcePath="/vtps/rest/createCCStoredPayment" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="FirstCreate" id="993d281f-9a20-435c-9a55-1c3d55bdd422" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="BASIC aWFobWVkOmhlbGxvMjIyMg==" xmlns="http://eviware.com/soapui/config"/></con:setting>
        </con:settings>
        <con:endpoint>https://qa.velocitypayment.com</con:endpoint>
        <con:request>{  "header": {   
	"clientAccountNumber": "${DataGenRadmonCANforDuplicate#DuplicateCAN}",   
	"applicationID": "609",   
	"customerID": "195"  },
"paymentMethod": {   
	"paymentMethodType": "1",   
	"pan": "4111111111111111",   
	"card_expiration": "102021",   
	"card_exmo": "10",   
	"card_exyr": "2021"  },
"customerInformation": {   
	"firstName": "Fred",   
	"lastName": "Smith",   
	"companyName": "ABC Company",   
	"addressLine1": "123 Main St",   
	"city": "Arlington",   
	"state": "VA",   
	"zip": "22201",   
	"country": "840"  
}
}</con:request>
        <con:originalUri>https://qa.velocitypayment.com/vtps/rest/createCCStoredPayment</con:originalUri>
        <con:assertion type="JsonPath Match" id="0c8eb539-2a89-4599-b566-64eff781d571" name="Match content of [result]">
          <con:configuration>
            <path>$['result']</path>
            <content>0</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="1d8db93d-0a82-4b06-bbb8-f555f4d313cf" name="Match content of [errorCode]">
          <con:configuration>
            <path>$['errorCode']</path>
            <content>null</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="93414064-7c1d-42d3-803c-542e01bec1da" name="Match content of [errorMessage]">
          <con:configuration>
            <path>$['errorMessage']</path>
            <content>null</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>Inherit From Parent</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:parameters/>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="SecondCreate" id="281d3d43-9570-4f68-8665-78c1b7d02d36">
    <con:settings/>
    <con:config service="REST Service 14" resourcePath="/vtps/rest/createCCStoredPayment" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="SecondCreate" id="993d281f-9a20-435c-9a55-1c3d55bdd422" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="BASIC aWFobWVkOmhlbGxvMjIyMg==" xmlns="http://eviware.com/soapui/config"/></con:setting>
        </con:settings>
        <con:endpoint>https://qa.velocitypayment.com</con:endpoint>
        <con:request>{  "header": {   
	"clientAccountNumber": "${FirstCreate#Request#$['header']['clientAccountNumber']}",   
	 "applicationID": "609",   
	"customerID": "195"  },
"paymentMethod": {   
	"paymentMethodType": "1",   
	"pan": "4111111111111111",   
	"card_expiration": "102021",   
	"card_exmo": "10",   
	"card_exyr": "2021"  },
"customerInformation": {   
	"firstName": "Fred",   
	"lastName": "Smith",   
	"companyName": "ABC Company",   
	"addressLine1": "123 Main St",   
	"city": "Arlington",   
	"state": "VA",   
	"zip": "22201",   
	"country": "840"  
}
}</con:request>
        <con:originalUri>https://qa.velocitypayment.com/vtps/rest/createCCStoredPayment</con:originalUri>
        <con:assertion type="JsonPath Match" id="a0bfdffc-4768-4520-8ea3-c9d785822919" name="Match content of [result]">
          <con:configuration>
            <path>$['result']</path>
            <content>1</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="9e8e862a-1cf8-4811-9948-013465423867" name="Match content of [errorCode]">
          <con:configuration>
            <path>$['errorCode']</path>
            <content>9002</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="0c5c5926-c6b2-4d62-b69d-846d2ef9383c" name="Match content of [errorMessage]">
          <con:configuration>
            <path>$['errorMessage']</path>
            <content>Duplicate stored payment method</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>Inherit From Parent</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:parameters/>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>373e3f83-87e5-4d28-93c1-fcf2e2140431</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
</con:testCase>
